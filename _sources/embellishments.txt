绘制修饰物
==========

GMT除了可以绘制常规的数据外，还可以绘制8种修饰物：地图比例尺、方向玫瑰图、磁场玫瑰图、颜色条、图例、Image overlay、GMT logo、map insert。

8种修饰物的绘制有各自不同的语法，但这些修饰物都可以抽象为一个矩形。在如何指定修饰符在图上的位置方面，拥有共同的语法。

下图中，大矩形代表底图，小矩形代表修饰物。要将一个修饰物放在底图上，首先要在底图上指定一个参考点，然后在修饰物上找到一个锚点，将修饰物的锚点放在图上的参考点上即可。

.. figure:: /images/GMT_anchors.*
   :width: 500 px
   :align: center

   参考点与锚点

参考点
------

可以用五种方式在图上指定一个参考点，其语法为::

    [g|j|J|n|x]<refpoint>

#. ``g`` 用数据坐标指定参考点，比如 ``g135W/20N`` 表示参考点是西经135度北纬20度
#. ``j`` 指定底图的某个锚点作为参考点。关于锚点，见 :doc:`anchors` 一节，在这种方式下，修饰物的锚点也默认使用相同的对齐方式代码。比如 ``jTL`` 将底图的左上角作为参考点，同时修饰物的锚点也是左上角，此时修饰物的左上角与底图左上角重合
#. ``J`` 与 ``j`` 类似，唯一的区别在于，修饰物的锚点默认使用镜像相反的锚点。比如 ``JTL`` 将底图的左上角作为参考点，同时修饰物的锚点是 ``BR`` 即右下角
#. ``x`` 用绘图坐标指定参考点。即相对于绘图原点的偏移距离。例如 ``x2.75i/2c``
#. ``n`` 用归一化坐标指定参考点，X方向和Y方向的坐标范围都是0到1。比如 ``n0.2/0.1``

若未指定使用何种方式，则默认使用 ``x`` 指定参考点。

锚点
----

在底图上指定了参考点之后，还需要在修饰物上指定锚点。可以使用子选项 ``+j<anchor>`` 来选定锚点。

在不使用该选项的情况下，若使用 ``j<refpoint>`` 指定参考点，则锚点与参考点使用相同的代码；若使用 ``J<refpoint>`` 指定参考点，则锚点使用与参考点呈镜像相反的代码；对于其他指定参考点的方式而言，锚点默认为 ``MC`` （map rose和map scale）或 ``BL`` （其他修饰物）。

偏移量
------

在指定参考点后，还可以对参考点指定额外的偏移量，尤其是使用 ``j`` 和 ``J`` 时。

可以使用 ``+o<dx>/<dy>`` 选项指定参考点的额外偏移量，并且正偏移量所对应的偏移方向与两字符锚点代码所指定的方向相同，比如使用 ``jBL`` 时， ``+o1c/1c`` 表示首先将参考点放在左下角，在此基础上，向左下角偏移量 ``1c/1c`` 。

背景面板
--------

可以在这些修饰物的后面加上背景面板。面板的位置和大小由修饰物决定，除此之外，面板还有一些其他属性。通常，面板的属性由 ``-F`` 选项的子选项决定：

#. ``+g<fill>`` 指定填充色，默认不填充
#. ``+p<pen>`` 指定边框画笔属性，默认使用 :ref:`MAP_FRAME_PEN <MAP_FRAME_PEN>` 的值
#. ``+r<radius>`` 绘制圆角边框， ``<radius>`` 为圆角的半径
#. ``+i<gap>/<pen>`` 在边框内部绘制一个内边框， ``<gap>`` 是内外边框的空白距离， ``<pen>`` 为内边框的画笔属性，比如 ``+i0.1c/thin,dahsed`` ，默认使用 :ref:`MAP_DEFAULT_PEN <MAP_DEFAULT_PEN>`
#. ``+c<clearance>`` 默认情况下面板的大小由修饰物的大小决定，可以使用该子选项为面板增加额外的尺寸。

   - ``+c<gap>`` 为四个方向增加相同的空白距离
   - ``+c<xgap>/<ygap>`` 分别为X方向和Y方向指定不同的空白距离
   - ``+c<lgap>/<rgap>/<bgap>/<tgap>`` 分别为四个方向指定不同的空白距离

#. ``+s<dx>/<dy>/<shade>`` 下拉阴影区。 ``<dx>/<dy>`` 是阴影区相对于面板的偏移量， ``<shade>`` 是阴影区的颜色，默认值为 ``4p/-4p/gray50`` 。

.. figure:: /images/GMT_panel.*
   :width: 600px
   :align: center

   GMT修饰物背景面板

   左图使用了 ``-F+glightgreen+r`` ，右图使用了 ``-F+p1p+i+s+gwhite+c0.1i``
